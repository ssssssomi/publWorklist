@charset "utf-8";

/* =========================================
  WORKLIST (Neumorphism + Light/Dark, Toss-like)
  - body[data-page="worklist"][data-theme="light|dark"]
  - rem scale: 1rem = 10px
  - 접근성: focus-visible, 대비, reduce-motion
========================================= */

body[data-page="worklist"] {
  /* base scale */
  --radius-lg: 1.8rem;
  --radius-md: 1.4rem;
  --radius-sm: 1.2rem;

  --gap-1: 0.8rem;
  --gap-2: 1.2rem;
  --gap-3: 1.6rem;
  --gap-4: 2.4rem;

  --font-sm: 1.3rem;
  --font-md: 1.4rem;
  --font-lg: 1.8rem;

  --line: 0.1rem;

  /* motion */
  --dur: 140ms;
  --ease: ease;

  /* table sizes */
  --table-min: 120rem; /* 새창 컬럼 추가로 조금 늘림 */
  --thead-bg: rgba(255, 255, 255, 0.92);

  /* component sizes */
  --ctrl-h: 4rem;
  --btn-h: 3.8rem;

  /* focus */
  --focus-w: 0.2rem;
}

/* ---------- THEME TOKENS ---------- */
body[data-page="worklist"][data-theme="light"] {
  /* Toss-like: white + gray + blue */
  --bg: #f6f7f9;
  --surface: #ffffff;
  --text: #191f28;
  --muted: #6b7684;

  --border: rgba(0, 0, 0, 0.06);

  /* soft neumorphism */
  --shadow-dark: rgba(0, 0, 0, 0.10);
  --shadow-light: rgba(255, 255, 255, 0.90);

  /* primary blue */
  --primary: #3182f6;
  --focus: var(--primary);

  /* status */
  --status-done: #2d7ff9; /* 블루톤 통일 */
  --status-progress: #3182f6;
  --status-todo: #8b95a1;

  --dialog-backdrop: rgba(15, 23, 42, 0.55);
}

body[data-page="worklist"][data-theme="dark"] {
  --bg: #141821;
  --surface: #141821;
  --text: #eef1f6;
  --muted: #a7afc0;

  --border: rgba(255, 255, 255, 0.10);

  /* neumorphism */
  --shadow-dark: rgba(0, 0, 0, 0.62);
  --shadow-light: rgba(255, 255, 255, 0.06);

  --primary: #6aa6ff;
  --focus: #6aa6ff;

  /* status */
  --status-done: #6aa6ff;
  --status-progress: #88b7ff;
  --status-todo: #b8c0d4;

  --dialog-backdrop: rgba(0, 0, 0, 0.7);

  --thead-bg: rgba(20, 24, 33, 0.78);
}

/* ---------- MIXINS ---------- */
@mixin neu($radius: var(--radius-lg), $inset: false) {
  border-radius: $radius;
  background: var(--surface);
  border: var(--line) solid var(--border);

  @if $inset == true {
    box-shadow:
      inset 0.6rem 0.6rem 1.2rem var(--shadow-dark),
      inset -0.6rem -0.6rem 1.2rem var(--shadow-light);
  } @else {
    box-shadow:
      0.8rem 0.8rem 1.8rem var(--shadow-dark),
      -0.8rem -0.8rem 1.8rem var(--shadow-light);
  }
}

@mixin neu-soft($radius: var(--radius-md)) {
  border-radius: $radius;
  background: var(--surface);
  border: var(--line) solid var(--border);
  box-shadow:
    0.5rem 0.5rem 1.2rem var(--shadow-dark),
    -0.5rem -0.5rem 1.2rem var(--shadow-light);
}

@mixin ctrl() {
  height: var(--ctrl-h);
  padding: 0 1.2rem;
  border-radius: var(--radius-sm);
  background: var(--surface);
  border: var(--line) solid var(--border);
  color: var(--text);
  box-shadow:
    0.5rem 0.5rem 1.2rem var(--shadow-dark),
    -0.5rem -0.5rem 1.2rem var(--shadow-light);
}

/* ---------- A11Y ---------- */
body[data-page="worklist"] :focus-visible {
  outline: var(--focus-w) solid var(--focus);
  outline-offset: 0.3rem;
}

@media (prefers-reduced-motion: reduce) {
  body[data-page="worklist"] * {
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}

/* ---------- LAYOUT ---------- */
body[data-page="worklist"] {
  background: var(--bg);
  color: var(--text);
}

.worklist-wrap {
  padding: var(--gap-4);
  min-height: 100vh;
  position: relative;
}

.worklist-head {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: var(--gap-3);
  flex-wrap: wrap;
  margin-bottom: var(--gap-3);
}

.worklist-title {
  margin: 0;
  font-size: 2.2rem;
  font-weight: 800;
  letter-spacing: -0.02em;
}

.worklist-toolbar {
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  gap: var(--gap-3);
  flex-wrap: wrap;
}

.worklist-meta {
  display: flex;
  align-items: flex-end;
  gap: var(--gap-2);
  flex-wrap: wrap;
}

.field {
  display: grid;
  gap: 0.6rem;
}

.field label {
  font-size: var(--font-sm);
  color: var(--muted);
}

.field input[type="search"],
.field select {
  @include ctrl();
  min-width: 26rem;
}

.field select {
  min-width: 14rem;
}

/* ===== Worklist Custom Select (Toss-like) ===== */
.wl-native-select {
  position: absolute;
  width: 0.1rem;
  height: 0.1rem;
  margin: -0.1rem;
  padding: 0;
  overflow: hidden;
  clip: rect(0 0 0 0);
  border: 0;
}

.wl-select {
  position: relative;
}

.wl-select__btn {
  @include ctrl();
  min-width: 14rem;
  height: var(--ctrl-h);
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  cursor: pointer;
  user-select: none;

  border-color: rgba(0, 0, 0, 0.08);
}

body[data-page="worklist"][data-theme="dark"] .wl-select__btn {
  border-color: rgba(255, 255, 255, 0.12);
}

.wl-select__value {
  font-size: var(--font-md);
  font-weight: 800;
  letter-spacing: -0.01em;
}

.wl-select__chev {
  font-size: 1.2rem;
  opacity: 0.7;
  transform: translateY(-0.1rem);
}

.wl-select__list {
  position: absolute;
  top: calc(100% + 1rem);
  left: 0;
  min-width: 100%;
  padding: 0.8rem;
  margin: 0;
  list-style: none;

  border-radius: 1.6rem;
  background: var(--surface);
  border: var(--line) solid var(--border);

  box-shadow:
    1.8rem 1.8rem 4rem rgba(0, 0, 0, 0.10),
    -1rem -1rem 2.6rem rgba(255, 255, 255, 0.70);

  z-index: 50;
}

body[data-page="worklist"][data-theme="dark"] .wl-select__list {
  box-shadow:
    1.8rem 1.8rem 4.2rem rgba(0, 0, 0, 0.55),
    -1rem -1rem 2.6rem rgba(255, 255, 255, 0.06);
}

.wl-select__opt {
  display: flex;
  align-items: center;
  gap: 1rem;

  padding: 1rem 1.2rem;
  border-radius: 1.2rem;

  font-weight: 900;
  font-size: 1.6rem;
  letter-spacing: -0.02em;

  cursor: pointer;
  color: var(--text);
}

.wl-select__check {
  width: 1.8rem;
  display: inline-flex;
  justify-content: center;
  opacity: 0;
}

.wl-select__opt[aria-selected="true"] .wl-select__check {
  opacity: 1;
  color: var(--primary);
}

.wl-select__opt:hover {
  background: rgba(49, 130, 246, 0.08);
}

body[data-page="worklist"][data-theme="dark"] .wl-select__opt:hover {
  background: rgba(106, 166, 255, 0.14);
}

.wl-select__opt:focus-visible {
  outline: var(--focus-w) solid var(--focus);
  outline-offset: 0.2rem;
}

.wl-select.is-open .wl-select__btn {
  box-shadow:
    inset 0.6rem 0.6rem 1.2rem var(--shadow-dark),
    inset -0.6rem -0.6rem 1.2rem var(--shadow-light);
  border-color: rgba(49, 130, 246, 0.25);
}

.worklist-actions {
  display: flex;
  align-items: center;
  gap: var(--gap-2);
}

.btn-theme {
  @include ctrl();
  height: var(--btn-h);
  display: inline-flex;
  align-items: center;
  gap: 0.8rem;
  cursor: pointer;
  user-select: none;
  transition: transform var(--dur) var(--ease);
}

.btn-theme:active {
  @include neu(var(--radius-sm), true);
  transform: translateY(0.1rem);
}

.btn-theme__text {
  font-size: var(--font-md);
  font-weight: 700;
}

.worklist-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: var(--gap-3);
  padding: 1rem 1.2rem;
  @include neu-soft(var(--radius-md));
}

.summary-item {
  font-size: var(--font-sm);
  color: var(--muted);

  strong {
    color: var(--text);
    font-weight: 800;
    margin-left: 0.6rem;
  }
}

/* ---------- TABLE ---------- */
.worklist-table-wrap {
  @include neu(var(--radius-lg), false);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.worklist-table {
  width: 100%;
  min-width: var(--table-min);
  border-collapse: collapse;
}

.worklist-table caption {
  padding: 1.4rem 1.6rem;
  text-align: left;
  font-weight: 800;
  color: var(--text);
}

.worklist-table thead th {
  position: sticky;
  top: 0;
  z-index: 2;
  background: var(--thead-bg);
  backdrop-filter: blur(1rem);
}

.worklist-table th,
.worklist-table td {
  padding: 1.2rem 1.4rem;
  border-top: var(--line) solid var(--border);
  vertical-align: top;
  text-align: left;
  font-size: var(--font-md);
}

.worklist-table th {
  font-weight: 800;
}

.worklist-table tbody tr {
  transition: transform var(--dur) var(--ease);
}

.worklist-table tbody tr:hover {
  transform: translateY(-0.1rem);
}

/* column sizing */
.col-no { width: 5.6rem; white-space: nowrap; }
.col-id { width: 12rem; white-space: nowrap; }
.col-preview { width: 12rem; white-space: nowrap; }
.col-new { width: 9rem; white-space: nowrap; }
.col-d1 { width: 12rem; }
.col-d2 { width: 14rem; }
.col-name { width: 22rem; }
.col-path { width: 26rem; word-break: break-all; }
.col-file { width: 18rem; word-break: break-all; }
.col-status { width: 12rem; white-space: nowrap; }
.col-note { min-width: 18rem; }

/* ---------- BUTTONS / LINKS / STATUS ---------- */
.btn-preview {
  height: var(--btn-h);
  padding: 0 1.2rem;
  border-radius: 999px;
  border: var(--line) solid var(--border);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.8rem;
  font-weight: 800;

  box-shadow:
    0.5rem 0.5rem 1.2rem var(--shadow-dark),
    -0.5rem -0.5rem 1.2rem var(--shadow-light);

  transition: transform var(--dur) var(--ease), color var(--dur) var(--ease);
}

.btn-preview:hover {
  color: var(--primary);
}

.btn-preview:active {
  transform: translateY(0.1rem);
  box-shadow:
    inset 0.6rem 0.6rem 1.2rem var(--shadow-dark),
    inset -0.6rem -0.6rem 1.2rem var(--shadow-light);
}

.btn-preview__text {
  font-size: var(--font-md);
}

.btn-newtab {
  height: var(--btn-h);
  padding: 0 1.2rem;
  border-radius: 999px;
  border: var(--line) solid rgba(49, 130, 246, 0.18);
  background: rgba(49, 130, 246, 0.08);
  color: var(--primary);
  text-decoration: none;
  font-weight: 800;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  transition: transform var(--dur) var(--ease);

  box-shadow:
    0.4rem 0.4rem 1rem var(--shadow-dark),
    -0.4rem -0.4rem 1rem var(--shadow-light);
}

.btn-newtab:active {
  transform: translateY(0.1rem);
  box-shadow:
    inset 0.6rem 0.6rem 1.2rem var(--shadow-dark),
    inset -0.6rem -0.6rem 1.2rem var(--shadow-light);
}

.status {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 2.8rem;
  padding: 0 1.2rem;
  border-radius: 999px;
  font-size: var(--font-sm);
  font-weight: 800;
  border: var(--line) solid var(--border);

  box-shadow:
    0.4rem 0.4rem 1rem var(--shadow-dark),
    -0.4rem -0.4rem 1rem var(--shadow-light);
}

.status[data-status="done"] {
  color: var(--status-done);
  border-color: rgba(49, 130, 246, 0.18);
}

.status[data-status="progress"] {
  color: var(--status-progress);
  border-color: rgba(49, 130, 246, 0.22);
}

.status[data-status="todo"] {
  color: var(--status-todo);
  border-color: rgba(139, 149, 161, 0.22);
}

/* ---------- DIALOG ---------- */
.dialog-backdrop[hidden],
.dialog[hidden] {
  display: none !important;
}

.dialog-backdrop {
  position: fixed;
  inset: 0;
  background: var(--dialog-backdrop);
  z-index: 999;
}

.dialog {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: grid;
  place-items: center;
  padding: 1.6rem;
}

.dialog-panel {
  width: min(110rem, 100%);
  height: min(82vh, 76rem);
  display: flex;
  flex-direction: column;
  overflow: hidden;

  border-radius: 2.2rem;
  background: var(--surface);
  border: var(--line) solid var(--border);
}

.dialog-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gap-2);
  padding: 1.2rem 1.6rem;
  border-bottom: var(--line) solid var(--border);
}

.dialog-title {
  margin: 0;
  font-size: 1.6rem;
  font-weight: 900;
}

.dialog-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.btn-close {
  @include ctrl();
  height: var(--btn-h);
  min-width: 7.2rem;
  cursor: pointer;
  font-weight: 900;
}

.btn-close:active {
  @include neu(var(--radius-sm), true);
}

.dialog-body {
  flex: 1;
  min-height: 0;
  padding: 1.2rem;
}

.preview-frame {
  width: 100%;
  height: 100%;
  border: 0;
  border-radius: 1.6rem;

  box-shadow:
    inset 0.8rem 0.8rem 1.6rem var(--shadow-dark),
    inset -0.8rem -0.8rem 1.6rem var(--shadow-light);
}

.dialog-note {
  margin: 0;
  padding: 1rem 1.6rem;
  border-top: var(--line) solid var(--border);
  color: var(--muted);
  font-size: var(--font-sm);
}

/* ---------- Floating Guide Button ---------- */
.publ-guide--link {
  position: fixed;
  right: 2.4rem;
  bottom: 2.4rem;
  z-index: 50;
}

.publ-guide--link a {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 8rem;
  height: 8rem;

  border-radius: 50%;
  text-decoration: none;

  background: var(--primary);
  color: #fff;

  box-shadow:
    0 0.8rem 2.4rem color-mix(in srgb, var(--primary) 35%, transparent),
    0.6rem 0.6rem 1.6rem var(--shadow-dark),
    -0.6rem -0.6rem 1.6rem var(--shadow-light);

  transition: transform var(--dur) var(--ease), background var(--dur) var(--ease);
}

.publ-guide--link a:hover {
  background: color-mix(in srgb, var(--primary) 92%, #000 8%);
  transform: translateY(-0.1rem);
}

.publ-guide--link a:active {
  transform: translateY(0.1rem);
  box-shadow:
    inset 0.6rem 0.6rem 1.2rem var(--shadow-dark),
    inset -0.6rem -0.6rem 1.2rem var(--shadow-light);
}

/* ---------- SMALL SCREEN ---------- */
@media (max-width: 64rem) {
  .worklist-wrap { padding: 1.6rem; }
  .field input[type="search"] { min-width: 22rem; }
  .worklist-title { font-size: 2rem; }

  .publ-guide--link {
    right: 1.6rem;
    bottom: 1.6rem;
  }
  .publ-guide--link a {
    width: 6.8rem;
    height: 6.8rem;
  }
}
